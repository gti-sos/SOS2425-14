import{t as v,h as ot,a as h}from"../chunks/Cw--0ebe.js";import"../chunks/C5mLL2l5.js";import{p as st,t as w,a as it,$ as nt,s,c as d,b as p,m as D,n as ct,g as l,r as u,aw as lt}from"../chunks/LDrxhfq1.js";import{s as x}from"../chunks/1neYngIx.js";import{i as f}from"../chunks/BG8tU1X3.js";import{s as y}from"../chunks/crEyKr2S.js";import{t as dt,f as pt}from"../chunks/IMrtpuJV.js";import{b as ut}from"../chunks/Cji-WUv_.js";import{i as mt}from"../chunks/BwztKqQM.js";import{o as ht}from"../chunks/C73a-Tmm.js";var vt=v('<meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <link href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.7.20/c3.min.css" rel="stylesheet"> <link href="https://unpkg.com/vis-timeline@latest/styles/vis-timeline-graph2d.min.css" rel="stylesheet">',1),ft=v("<p>Cargando datos...</p>"),gt=v('<p style="color: red"> </p>'),yt=v("<p>Cargando datos...</p>"),_t=v('<p style="color: red"> </p>'),wt=v("<p>Cargando datos...</p>"),bt=v('<p style="color: red"> </p>'),Et=v("<p>Cargando datos...</p>"),xt=v('<p style="color: red"> </p>'),At=v("<p>Cargando datos...</p>"),jt=v('<p style="color: red"> </p>'),Gt=v("<p>Cargando datos...</p>"),Ct=v('<p style="color: red"> </p>'),Dt=v("<p>Cargando datos...</p>"),$t=v('<p style="color: red"> </p>'),kt=v('<div class="wrapper"><div class="container"><h2 style="text-align: center;">Integraciones <br><i>Jaime Duffy Panés</i></h2> <hr style="width: 100%; animation: loadHrGraph 1s; transition: all 0.3s ease;"> <div><div class="article"><h3 style="font-size: 1.5em; text-transform: none;">Widget: Distribución de ayudas DANA por municipios</h3> <p>Este gráfico representa cómo se reparte la ayuda por la dana para cada municipio.</p> <a style="color: #fff;" target="_blank"><i>G18-dana-grants-subsidies-stats</i></a> <div class="chart-container svelte-13lr82f"><figure class="highcharts-figure"><div id="container"></div> <!> <!></figure></div></div> <div class="article"><h3 style="font-size: 1.5em; text-transform: none;">Integración: Número de multas por tasa de paro</h3> <p>Este gráfico nos muestra el número de multas de las comunidades autónomas junto con la tasa de paro.</p> <a style="color: #fff; margin-right: 1rem;" target="_blank"><i>G10-radars-stats</i></a> <a style="color: #fff;" target="_blank"><i>API: Datos de Empleo</i></a> <div class="chart-container svelte-13lr82f"><div id="chart10" style="max-width: 800px; margin: auto;"></div> <!> <!></div></div> <div class="article"><h3 style="font-size: 1.5em; text-transform: none;">Integración: Número de proyectos y tasa de actividad</h3> <p>Este gráfico mustra el numero de proyectos y la tasa de actividad en andalucía según los años.</p> <a style="color: #fff; margin-right: 1rem;" target="_blank"><i>G13-water-supply-improvements</i></a> <a style="color: #fff;" target="_blank"><i>API: Datos de Empleo</i></a> <div class="chart-container svelte-13lr82f"><div id="andaluciaChart" style="max-width: 700px; margin: auto;"></div> <!> <!></div></div> <div class="article"><h3 style="font-size: 1.5em; text-transform: none;">Widget: Distribución de Estudiantes por Grado Universitario</h3> <p>Este gráfico en formato donut muestra la proporción de estudiantes matriculados en los distintos grados universitarios, destacando los seis con mayor volumen. Los grados restantes se agrupan en la categoría “Otras” para facilitar la visualización comparativa.</p> <a style="color: #fff; margin-right: 1rem;" target="_blank"><i>G17-university-academic-performance</i></a> <div class="chart-container svelte-13lr82f"><div id="chart17" style="max-width: 600px; margin: auto;"></div> <!> <!></div></div> <div class="article"><h3 style="font-size: 1.5em; text-transform: none;">Widget: Comparativa de Solicitudes de Autonomía y Dependencia por Comunidad Autónoma</h3> <p>Este gráfico de barras muestra la comparación entre el número de solicitudes de autonomía y de dependencia realizadas por diferentes comunidades autónomas en los años 2023 y 2024. Permite visualizar la relación entre ambas necesidades sociales y observar la distribución geográfica del apoyo solicitado.</p> <a style="color: #fff; margin-right: 1rem;" target="_blank"><i>G11-autonomy-dependence-applications</i></a> <div class="chart-container svelte-13lr82f"><div id="chart11" style="max-width: 600px; margin: auto;"></div> <!> <!></div></div> <div class="article"><h3>Widget API externa: Comparativa de contenido de azúcar por fruta</h3> <p>Este gráfico muestra la cantidad de azúcar (en gramos) contenida en diferentes frutas. <a style="color: #fff; margin-right: 1rem;" target="_blank"><i>Frutas API</i></a></p><div class="chart-container svelte-13lr82f"><div style="height: 400px;"></div> <!> <!></div></div> <div class="article"><h3>Widget API externa: Distribución de los países más poblados del mundo</h3> <p>Este gráfico representa la distribución demográfica de los países más poblados del mundo.</p> <a style="color: #fff; margin-right: 1rem;" target="_blank"><i>Countries API</i></a> <div class="chart-container svelte-13lr82f"><div id="chartcountries"></div> <!> <!></div></div></div></div></div>');function Ft(ba,Ea){st(Ea,!1);const S="https://sos2425-18.onrender.com/api/v2/dana-grants-subsidies-stats",G="https://sos2425-17.onrender.com/api/v2/university-academic-performance",I="https://sos2425-11.onrender.com/api/v1/autonomy-dependence-applications",C="https://sos2425-13.onrender.com/api/v1/water-supply-improvements",R="https://sos2425-10.onrender.com/api/v1/radars-stats";let $=D("/api/v1/employment-data");const B="https://restcountries.com/v3.1/all";let V=D("/api/v1/proxy/fruits"),A=[],b=[],k=[],j=[],P=[],T=[],N=[],m=D(!0),c=D("");function _(a){return new Promise((t,e)=>{if(document.querySelector(`script[src="${a}"]`))return t();const o=document.createElement("script");o.src=a,o.onload=t,o.onerror=e,document.head.appendChild(o)})}async function xa(){p(m,!0),p(c,""),b=[];try{console.log(`Solicitando datos a: ${I}`);let a=await fetch(I,{method:"GET",headers:{Accept:"application/json"}});if(!a.ok)throw new Error(`Error en la respuesta: ${a.status}`);b=await a.json(),console.log(`Datos recibidos: ${b.length} registros`),Pa()}catch(a){console.error(`ERROR G11: ${a}`),p(c,`Error al cargar datos G11: ${a.message}`)}finally{p(m,!1)}}async function Aa(){p(m,!0),p(c,""),k=[],N=[];try{let a=await fetch(l($),{method:"GET",headers:{Accept:"application/json"}});if(!a.ok)throw new Error(`Error en la respuesta: ${a.status}`);N=await a.json(),console.log(`Solicitando datos a: ${C}`);let e=await fetch(C,{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`Error en la respuesta: ${e.status}`);let i=await e.json();if(i.length===0){if(console.warn("No hay datos. Cargando datos iniciales..."),!(await fetch(`${C}/loadInitialData`,{method:"GET"})).ok)throw new Error("No se pudo cargar datos iniciales");if(await new Promise(r=>setTimeout(r,1e3)),e=await fetch(C,{method:"GET",headers:{Accept:"application/json"}}),!e.ok)throw new Error("Error al obtener datos tras la carga inicial");i=await e.json()}k=i,console.log(`Datos recibidos: ${k.length} registros`),ka()}catch(a){console.error(`ERROR G13: ${a}`),p(c,`Error al cargar datos G13: ${a.message}`)}finally{p(m,!1)}}async function ja(){p(m,!0),p(c,""),A=[];try{console.log(`Solicitando datos a: ${G}`);let a=await fetch(G,{method:"GET",headers:{Accept:"application/json"}});if(!a.ok)throw new Error(`Error en la respuesta: ${a.status}`);let t=await a.json();if(t.length===0){if(console.warn("No hay datos. Cargando datos iniciales..."),!(await fetch(`${G}/loadInitialData`,{method:"GET"})).ok)throw new Error("No se pudo cargar datos iniciales");if(await new Promise(i=>setTimeout(i,1e3)),a=await fetch(G,{method:"GET",headers:{Accept:"application/json"}}),!a.ok)throw new Error("Error al obtener datos tras la carga inicial");t=await a.json()}A=t,console.log(`Datos recibidos: ${A.length} registros`),$a()}catch(a){console.error(`ERROR G17: ${a}`),p(c,`Error al cargar datos G17: ${a.message}`)}finally{p(m,!1)}}async function Ga(){p(m,!0),p(c,""),j=[],T=[];try{let a=await fetch(l($),{method:"GET",headers:{Accept:"application/json"}});if(!a.ok)throw new Error(`Error en la respuesta: ${a.status}`);T=await a.json(),console.log(`Solicitando datos a: ${R}`);const e=await fetch(R,{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`Error en la respuesta: ${e.status}`);j=await e.json(),console.log(`Datos recibidos: ${j.length} registros`),Ta()}catch(a){console.error(`ERROR G10: ${a}`),p(c,`Error al cargar datos G10: ${a.message}`),p(m,!1)}}async function Ca(){p(m,!0),p(c,"");try{console.log(`Solicitando datos a: ${S}`);const a=await fetch(S,{method:"GET",headers:{Accept:"application/json"}});if(!a.ok)throw new Error(`Error en la respuesta: ${a.status}`);P=await a.json(),console.log(`Datos recibidos: ${P.length} registros`),Da()}catch(a){console.error(`ERROR al obtener datos: ${a}`),p(c,`Error al cargar datos: ${a.message}`)}finally{p(m,!1)}}async function Da(){console.log("Estructura de los primeros datos:",JSON.stringify(P[0],null,2));const a={};P.forEach(i=>{const o=i.mun_name,r=i.amt_granted;a[o]||(a[o]=0),a[o]+=r}),console.log("Datos agrupados por municipio:",a);const t=Object.entries(a).map(([i,o])=>({name:i,y:o})).sort((i,o)=>o.y-i.y);if(console.log("Datos preparados para el gráfico:",t),t.length===0){p(c,"No se pudieron encontrar datos válidos de municipios y cantidades");return}let e=t.slice(0,10);if(t.length>10){const o=t.slice(10).reduce((r,n)=>r+n.y,0);e.push({name:"Otros municipios",y:o})}Highcharts.chart("container",{chart:{type:"pie",backgroundColor:"rgba(255, 255, 255, 0.8)"},title:{text:"Distribución de ayudas por municipios",align:"center",style:{fontWeight:"bold",fontSize:"18px"}},subtitle:{text:"Fuente: G18-dana-grants-subsidies-stats",align:"center"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f}%",style:{fontSize:"12px"}},showInLegend:!0}},tooltip:{pointFormat:"{series.name}: <b>{point.y:.0f}€</b> ({point.percentage:.1f}%)"},legend:{enabled:!0,layout:"vertical",align:"right",verticalAlign:"middle"},accessibility:{point:{valueSuffix:"€"}},series:[{name:"Importe total",colorByPoint:!0,data:e}],credits:{enabled:!0,text:"G18-dana-grants-subsidies-stats"}})}function $a(){if(!Array.isArray(A)||A.length===0){p(c,"No hay datos disponibles de universidades para mostrar el gráfico.");return}const a={};A.forEach(r=>{const n=r.degree||"Desconocido";a[n]||(a[n]=0),a[n]+=r.cohortStudents||0});const t=Object.entries(a).sort((r,n)=>n[1]-r[1]),e=t.slice(0,6),i=t.slice(6).reduce((r,[,n])=>r+n,0);i>0&&e.push(["Otras",i]);const o=e.map(([r,n])=>[r,n]);c3.generate({bindto:"#chart17",data:{type:"donut",columns:o},donut:{title:"Estudiantes por universidad"}})}async function ka(){await lt();const a={};N.forEach(o=>{var r;if(((r=o.autonomous_community)==null?void 0:r.toLowerCase())==="andalucía"&&o.education_level==="TOTAL"){const n=o.year.toString();a[n]||(a[n]={activity_rate:null,project_count:null}),a[n].activity_rate=o.activity_rate}}),k.forEach(o=>{var r,n;if(((r=o.autonomous_community)==null?void 0:r.toLowerCase())==="andalucía"||((n=o.autonomous_community)==null?void 0:n.toLowerCase())==="andalucia"){const g=o.year.toString();a[g]||(a[g]={activity_rate:null,project_count:null}),a[g].project_count=o.project_count}});const t=Object.keys(a).sort(),e=["Tasa de Actividad (%)"],i=["Número de Proyectos"];t.forEach(o=>{const r=a[o];e.push(r.activity_rate??0),i.push(r.project_count??0)}),c3.generate({bindto:"#andaluciaChart",data:{x:"x",columns:[["x",...t],e,i],types:{"Tasa de Actividad (%)":"area-spline","Número de Proyectos":"area-spline"},labels:!0},axis:{x:{type:"category",label:"Año"},y:{label:"Valores"}},title:{text:"Evolución de Proyectos y Tasa de Actividad en Andalucía"},legend:{position:"right"}})}function Pa(){if(!Array.isArray(b)||b.length===0){p(c,"No hay datos disponibles para mostrar el gráfico.");return}const a=[...new Set(b.map(i=>`${i.place} ${i.year}`))],t=["Autonomía"],e=["Dependencia"];a.forEach(i=>{const[o,r]=i.split(/ (?=\d{4}$)/),n=b.find(g=>g.place===o&&g.year.toString()===r);t.push((n==null?void 0:n.request)||0),e.push((n==null?void 0:n.dependent_population)||0)}),c3.generate({bindto:"#chart11",data:{x:"x",columns:[["x",...a],t,e],type:"bar",labels:!0},axis:{x:{type:"category",label:{text:"Comunidad y Año",position:"outer-center"},tick:{rotate:45,multiline:!1}},y:{label:{text:"Solicitudes",position:"outer-middle"}}},title:{text:"Comparativa de Solicitudes de Autonomía y Dependencia por Comunidad Autónoma y Año"},legend:{position:"right"},tooltip:{grouped:!1}})}function Ta(){if(j.length===0||T.length===0){p(c,"No hay datos disponibles para mostrar el gráfico");return}const a={Madrid:"Madrid (Comunidad de)",Navarra:"Navarra (Comunidad Foral de)"};function t(r){return a[r]||r}const e=[["x"],["Tasa de Paro (%)"]],i=[];[...new Set(j.map(r=>t(r.autonomousCommunity)))].forEach(r=>{const n=j.filter(E=>t(E.autonomousCommunity)===r).reduce((E,rt)=>E+(rt.complaint||0),0),g=T.find(E=>t(E.autonomous_community)===r&&E.year===2023&&E.education_level==="TOTAL");g&&(i.push(r),e[0].push(n),e[1].push(g.unemployment_rate))}),console.log("Datos:",e),c3.generate({bindto:"#chart10",data:{xs:{"Tasa de Paro (%)":"x"},columns:e,type:"scatter",labels:!0},axis:{x:{label:"Número de multas",tick:{fit:!1}},y:{label:"Tasa de paro (%)"}},tooltip:{format:{title(r,n){return i[n]},value(r,n,g){return`${g==="x"?"Multas":"Paro"}: ${r}`}}},title:{text:"Relación entre tasa de paro (2023) y número de multas por Comunidad Autónoma"},legend:{position:"right"}})}async function Sa(){let a=await fetch(B,{method:"GET",headers:{Accept:"application/json"}});if(!a.ok)throw new Error(`Error en la respuesta: ${a.status}`);const e=(await a.json()).map(i=>[i.name.common,i.population]).sort((i,o)=>o[1]-i[1]).slice(0,6);c3.generate({bindto:"#chartcountries",data:{columns:e,type:"pie"},title:{text:"Top 6 países por población"}})}let O=D();async function Ia(){let a=await fetch(l(V),{method:"GET",headers:{Accept:"application/json"}});if(!a.ok)throw new Error(`Error en la respuesta: ${a.status}`);const t=await a.json(),e=new vis.DataSet(t.map((o,r)=>({x:r,y:o.nutritions.sugar,label:o.name,content:o.name}))),i={start:-1,end:t.length,drawPoints:{style:"circle"},shaded:{orientation:"bottom"},dataAxis:{left:{title:{text:"Azúcar (g)"}}},orientation:"bottom"};new vis.Graph2d(l(O),e,i)}ht(async()=>{try{await _("https://code.highcharts.com/highcharts.js"),await _("https://code.highcharts.com/modules/heatmap.js"),await _("https://code.highcharts.com/modules/exporting.js"),await _("https://code.highcharts.com/modules/export-data.js"),await _("https://code.highcharts.com/modules/accessibility.js"),await _("https://cdnjs.cloudflare.com/ajax/libs/d3/5.16.0/d3.min.js"),await _("https://cdnjs.cloudflare.com/ajax/libs/c3/0.7.20/c3.min.js"),await _("https://unpkg.com/vis-timeline@latest/standalone/umd/vis-timeline-graph2d.min.js"),await Ca(),await Aa(),await Ga(),await ja(),await xa(),await Ia(),await Sa()}catch(a){p(c,`Error cargando scripts de Highcharts: ${a}`),console.error(a)}}),mt();var z=kt();ot(a=>{var t=vt();nt.title="Integrations - Jaime Duffy Panés",ct(6),h(a,t)});var Y=d(z),L=s(d(Y),4),M=d(L),K=s(d(M),4);y(K,"href",S);var Q=s(K,2),X=d(Q),Z=s(d(X),2);{var Ra=a=>{var t=ft();h(a,t)};f(Z,a=>{l(m)&&a(Ra)})}var Na=s(Z,2);{var Oa=a=>{var t=gt(),e=d(t,!0);u(t),w(()=>x(e,l(c))),h(a,t)};f(Na,a=>{l(c)&&a(Oa)})}u(X),u(Q),u(M);var F=s(M,2),aa=s(d(F),4);y(aa,"href",R);var ta=s(aa,2),ea=s(ta,2),ra=s(d(ea),2);{var za=a=>{var t=yt();h(a,t)};f(ra,a=>{l(m)&&a(za)})}var La=s(ra,2);{var Ma=a=>{var t=_t(),e=d(t,!0);u(t),w(()=>x(e,l(c))),h(a,t)};f(La,a=>{l(c)&&a(Ma)})}u(ea),u(F);var W=s(F,2),oa=s(d(W),4);y(oa,"href",C);var sa=s(oa,2),ia=s(sa,2),na=s(d(ia),2);{var Fa=a=>{var t=wt();h(a,t)};f(na,a=>{l(m)&&a(Fa)})}var Wa=s(na,2);{var qa=a=>{var t=bt(),e=d(t,!0);u(t),w(()=>x(e,l(c))),h(a,t)};f(Wa,a=>{l(c)&&a(qa)})}u(ia),u(W);var q=s(W,2),ca=s(d(q),4);y(ca,"href",G);var la=s(ca,2),da=s(d(la),2);{var Ua=a=>{var t=Et();h(a,t)};f(da,a=>{l(m)&&a(Ua)})}var Ha=s(da,2);{var Ja=a=>{var t=xt(),e=d(t,!0);u(t),w(()=>x(e,l(c))),h(a,t)};f(Ha,a=>{l(c)&&a(Ja)})}u(la),u(q);var U=s(q,2),pa=s(d(U),4);y(pa,"href",I);var ua=s(pa,2),ma=s(d(ua),2);{var Ba=a=>{var t=At();h(a,t)};f(ma,a=>{l(m)&&a(Ba)})}var Va=s(ma,2);{var Ya=a=>{var t=jt(),e=d(t,!0);u(t),w(()=>x(e,l(c))),h(a,t)};f(Va,a=>{l(c)&&a(Ya)})}u(ua),u(U);var H=s(U,2),J=s(d(H),2),Ka=s(d(J));u(J);var ha=s(J),va=d(ha);ut(va,a=>p(O,a),()=>l(O));var fa=s(va,2);{var Qa=a=>{var t=Gt();h(a,t)};f(fa,a=>{l(m)&&a(Qa)})}var Xa=s(fa,2);{var Za=a=>{var t=Ct(),e=d(t,!0);u(t),w(()=>x(e,l(c))),h(a,t)};f(Xa,a=>{l(c)&&a(Za)})}u(ha),u(H);var ga=s(H,2),ya=s(d(ga),4);y(ya,"href",B);var _a=s(ya,2),wa=s(d(_a),2);{var at=a=>{var t=Dt();h(a,t)};f(wa,a=>{l(m)&&a(at)})}var tt=s(wa,2);{var et=a=>{var t=$t(),e=d(t,!0);u(t),w(()=>x(e,l(c))),h(a,t)};f(tt,a=>{l(c)&&a(et)})}u(_a),u(ga),u(L),u(Y),u(z),w(()=>{y(ta,"href",l($)),y(sa,"href",l($)),y(Ka,"href",l(V))}),dt(3,L,()=>pt,()=>({duration:400})),h(ba,z),it()}export{Ft as component};
