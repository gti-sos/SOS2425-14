import{t as j,h as it,a as M}from"../chunks/BloMgKyR.js";import"../chunks/DMvcjDYs.js";import{C as K,E as st,an as ot,ao as nt,ap as ct,o as dt,aq as ft,ar as lt,ag as ut,as as L,ac as U,ad as W,ae as vt,a7 as ht,aa as _t,$ as mt,c as u,q as b,F as Y,s as E,r as l,_ as p,a9 as J}from"../chunks/DvUjY8h5.js";import{a as Et,w as wt,e as P,s as x}from"../chunks/BaA98Pk7.js";import{i as bt}from"../chunks/CDjYmTfr.js";import{e as pt,i as yt}from"../chunks/TDCAPJ9a.js";import{i as gt}from"../chunks/CSBI7I02.js";import{o as Tt}from"../chunks/GyJkTNFx.js";const Dt=()=>performance.now(),g={tick:a=>requestAnimationFrame(a),now:()=>Dt(),tasks:new Set};function V(){const a=g.now();g.tasks.forEach(t=>{t.c(a)||(g.tasks.delete(t),t.f())}),g.tasks.size!==0&&g.tick(V)}function kt(a){let t;return g.tasks.size===0&&g.tick(V),{promise:new Promise(r=>{g.tasks.add(t={c:a,f:r})}),abort(){g.tasks.delete(t)}}}function O(a,t){wt(()=>{a.dispatchEvent(new CustomEvent(t))})}function $t(a){if(a==="float")return"cssFloat";if(a==="offset")return"cssOffset";if(a.startsWith("--"))return a;const t=a.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function Q(a){const t={},r=a.split(";");for(const s of r){const[i,v]=s.split(":");if(!i||v===void 0)break;const h=$t(i.trim());t[h]=v.trim()}return t}const At=a=>a;function It(a,t,r,s){var i=(a&ft)!==0,v="both",h,$=t.inert,R=t.style.overflow,f,n;function T(){var _=vt,k=K;U(null),W(null);try{return h??(h=r()(t,(s==null?void 0:s())??{},{direction:v}))}finally{U(_),W(k)}}var D={is_global:i,in(){t.inert=$,O(t,"introstart"),f=B(t,T(),n,1,()=>{O(t,"introend"),f==null||f.abort(),f=h=void 0,t.style.overflow=R})},out(_){t.inert=!0,O(t,"outrostart"),n=B(t,T(),f,0,()=>{O(t,"outroend"),_==null||_()})},stop:()=>{f==null||f.abort(),n==null||n.abort()}},y=K;if((y.transitions??(y.transitions=[])).push(D),Et){var m=i;if(!m){for(var c=y.parent;c&&(c.f&st)!==0;)for(;(c=c.parent)&&(c.f&ot)===0;);m=!c||(c.f&nt)!==0}m&&ct(()=>{dt(()=>D.in())})}}function B(a,t,r,s,i){var v=s===1;if(lt(t)){var h,$=!1;return ut(()=>{if(!$){var _=t({direction:v?"in":"out"});h=B(a,_,r,s,i)}}),{abort:()=>{$=!0,h==null||h.abort()},deactivate:()=>h.deactivate(),reset:()=>h.reset(),t:()=>h.t()}}if(r==null||r.deactivate(),!(t!=null&&t.duration))return i(),{abort:L,deactivate:L,reset:L,t:()=>s};const{delay:R=0,css:f,tick:n,easing:T=At}=t;var D=[];if(v&&r===void 0&&(n&&n(0,1),f)){var y=Q(f(0,1));D.push(y,y)}var m=()=>1-s,c=a.animate(D,{duration:R});return c.onfinish=()=>{var _=(r==null?void 0:r.t())??1-s;r==null||r.abort();var k=s-_,A=t.duration*Math.abs(k),F=[];if(A>0){var N=!1;if(f)for(var C=Math.ceil(A/16.666666666666668),I=0;I<=C;I+=1){var o=_+k*T(I/C),e=Q(f(o,1-o));F.push(e),N||(N=e.overflow==="hidden")}N&&(a.style.overflow="hidden"),m=()=>{var d=c.currentTime;return _+k*T(d/A)},n&&kt(()=>{if(c.playState!=="running")return!1;var d=m();return n(d,1-d),!0})}c=a.animate(F,{duration:A,fill:"forwards"}),c.onfinish=()=>{m=()=>s,n==null||n(s,1-s),i()}},{abort:()=>{c&&(c.cancel(),c.effect=null,c.onfinish=L)},deactivate:()=>{i=L},reset:()=>{s===0&&(n==null||n(1,0))},t:()=>m()}}const xt=a=>a;function Rt(a,{delay:t=0,duration:r=400,easing:s=xt}={}){const i=+getComputedStyle(a).opacity;return{delay:t,duration:r,easing:s,css:v=>`opacity: ${v*i}`}}var Ft=j('<p class="info-message"> </p>'),Nt=j('<tr><td> </td><td> </td><td> </td><td> </td><td> </td><td class="actions"><button class="edit" title="Edit record"><i class="fas fa-pen"></i></button>  <button class="delete" title="Delete record"><i class="fas fa-times"></i></button></td></tr>'),Ct=j('<div class="wrapper dash"><div class="container dash"><!> <div class="header"><h3>Education Data</h3> <div class="actions"><button class="green"><i class="fas fa-plus"></i> Add New Record</button> <button class="green"><i class="fas fa-sync-alt"></i> Reload Initial Data</button> <button class="red"><i class="fas fa-trash-alt"></i> Delete All</button></div></div> <div class="seeker"></div> <div class="table-container"><table><thead><tr><th>Autonomous Community</th><th>Year</th><th>Basic FP</th><th>Middle Grade</th><th>Higher Grade</th><th>Actions</th></tr></thead></table> <div class="scroll-body"><table><tbody></tbody></table></div></div></div></div>');function Bt(a,t){ht(t,!1);let r="/api/v1/education-data",s=Y([]),i=Y("");async function v(){try{const o=await fetch(r);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const e=await o.json();p(s,e)}catch(o){console.error("[GET] Error getting education data:",o)}}function h(){}async function $(){const o=`${r}/loadInitialData?reset=true`,e=`${r}/loadInitialData`;try{if(b(s).length>0){if(!confirm("There are existing records. Do you want to reload the initial data and reset everything?"))return;const w=await fetch(o);if(!w.ok)throw new Error(`Error ${w.status}`);p(i,"🔄 Initial data reloaded with reset.")}else{const d=await fetch(e);if(!d.ok)throw new Error(`Error ${d.status}`);p(i,"📥 Initial data loaded.")}await v()}catch(d){console.error("[LOAD INITIAL DATA] Error:",d),p(i,"❌ Error loading initial data.")}setTimeout(()=>{p(i,"")},3e3)}async function R(){if(confirm("Are you sure you want to delete all records?")){try{const e=await fetch(r,{method:"DELETE"});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);p(i,"✅ All records have been deleted."),await v()}catch(e){console.error("[DELETE] Error deleting records:",e),p(i,"❌ Error deleting records.")}setTimeout(()=>{p(i,"")},3e3)}}async function f(o,e){if(confirm(`Are you sure you want to delete the record for ${o} (${e})?`)){try{const w=await fetch(`${r}/${o}/${e}`,{method:"DELETE"});if(!w.ok)throw new Error(`HTTP error! status: ${w.status}`);p(i,`🗑️ Record for ${o} (${e}) deleted successfully.`),await v()}catch(w){console.error("[DELETE ONE] Error deleting record:",w),p(i,"❌ Error deleting the record.")}setTimeout(()=>{p(i,"")},3e3)}}Tt(async()=>{v()}),gt();var n=Ct();it(o=>{mt.title="Dashboard - Education Data"});var T=u(n),D=u(T);{var y=o=>{var e=Ft(),d=u(e,!0);l(e),J(()=>x(d,b(i))),It(3,e,()=>Rt,()=>({duration:300})),M(o,e)};bt(D,o=>{b(i)&&o(y)})}var m=E(D,2),c=E(u(m),2),_=u(c),k=E(_,2),A=E(k,2);l(c),l(m);var F=E(m,4),N=E(u(F),2),C=u(N),I=u(C);pt(I,5,()=>b(s),yt,(o,e)=>{var d=Nt(),w=u(d),X=u(w,!0);l(w);var S=E(w),Z=u(S,!0);l(S);var q=E(S),tt=u(q,!0);l(q);var G=E(q),at=u(G,!0);l(G);var H=E(G),rt=u(H,!0);l(H);var z=E(H),et=E(u(z),2);l(z),l(d),J(()=>{x(X,b(e).autonomous_community),x(Z,b(e).year),x(tt,b(e).basic_fp),x(at,b(e).middle_grade),x(rt,b(e).higher_grade)}),P("click",et,()=>f(b(e).autonomous_community,b(e).year)),M(o,d)}),l(I),l(C),l(N),l(F),l(T),l(n),P("click",_,h),P("click",k,$),P("click",A,R),M(a,n),_t()}export{Bt as component};
