import{t as B,h as W,a as z}from"../chunks/DPAxXt5P.js";import"../chunks/mJqeYPRp.js";import{v as X,z as k,A as Y,x as O,c,s as r,b as a,w as Z,$ as ee,h as t,m as s,B as ae,r as u}from"../chunks/UhFziN8V.js";import{e as j,s as te}from"../chunks/-BXE7098.js";import{i as oe}from"../chunks/Dv-5-jWs.js";import{r as m}from"../chunks/DnUxF-Tf.js";import{b as d,p as re,t as se,f as ne}from"../chunks/i9WfCmyJ.js";import{b as ie}from"../chunks/gZiIxItT.js";import{i as le}from"../chunks/DIe8ygAY.js";import{s as pe,a as ce}from"../chunks/CSo_blNX.js";import{p as ue}from"../chunks/B6-Ez7gS.js";import{o as me}from"../chunks/D-IH1sAi.js";import{g as L}from"../chunks/DiWoTeV4.js";var de=B('<p class="info-message"> </p>'),_e=B('<div class="wrapper dash"><div class="container dash"><!> <form class="create-form"><input readonly=""> <input readonly=""> <select disabled><option disabled selected>Nivel educativo</option><option>Educaci√≥n superior (SUP)</option><option>Secundaria (SEC)</option><option>Inferior a secundaria (INF)</option><option>Total (TOTAL)</option></select> <input placeholder="Tasa actividad"> <input placeholder="Tasa empleo"> <input placeholder="Tasa paro"> <button type="submit" class="submit">Actualizar</button> <button type="button" class="cancel">Cancelar</button></form></div></div>');function Ae(D,q){X(q,!1);const[J,M]=pe(),N=()=>ce(ue,"$page",J),g=s();let l=s(""),p=s(""),n=s(""),_=s(""),v=s(""),f=s(""),i=s(""),F=s("/api/v1/employment-data");me(async()=>{try{const e=await fetch(a(g));if(!e.ok)throw new Error("No se pudo cargar el recurso.");const o=await e.json();t(l,o.autonomous_community),t(p,o.year),t(n,o.education_level),t(_,o.activity_rate),t(v,o.employment_rate),t(f,o.unemployment_rate)}catch(e){t(i,`Error al cargar los datos: ${e.message}`)}});async function G(){try{const e=await fetch(a(g),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({autonomous_community:a(l),year:parseInt(a(p)),education_level:a(n),activity_rate:parseFloat(a(_)),employment_rate:parseFloat(a(v)),unemployment_rate:parseFloat(a(f))})});if(e.ok)t(i,"Registro actualizado correctamente"),setTimeout(()=>L("/employment"),1500);else if(e.status===400){const o=await e.json();t(i,"Error en los datos")}else e.status===404?t(i,"El recurso que intentas actualizar no existe."):t(i,"Error inesperado al actualizar el registro.")}catch(e){e instanceof Error&&e.message,t(i,"No se pudo conectar con el servidor")}}function H(){L("/employment")}k(()=>N(),()=>{const e=N().params;t(l,decodeURIComponent(e.autonomous_community)),t(p,e.year),t(n,decodeURIComponent(e.education_level))}),k(()=>(a(F),a(l),a(p),a(n)),()=>{t(g,`${a(F)}/${encodeURIComponent(a(l))}/${a(p)}/${encodeURIComponent(a(n))}`)}),Y(),le();var b=_e();W(e=>{ee.title="Editar recurso"});var P=c(b),R=c(P);{var K=e=>{var o=de(),V=c(o,!0);u(o),O(()=>te(V,a(i))),se(3,o,()=>ne,()=>({duration:300})),z(e,o)};oe(R,e=>{a(i)&&e(K)})}var h=r(R,2),$=c(h);m($);var E=r($,2);m(E);var y=r(E,2);O(()=>{a(n),ae(()=>{})});var T=c(y);T.value=((T.__value="")==null,"");var I=r(T);I.value=(I.__value="SUP")==null?"":"SUP";var C=r(I);C.value=(C.__value="SEC")==null?"":"SEC";var S=r(C);S.value=(S.__value="INF")==null?"":"INF";var x=r(S);x.value=(x.__value="TOTAL")==null?"":"TOTAL",u(y);var w=r(y,2);m(w);var A=r(w,2);m(A);var U=r(A,2);m(U);var Q=r(U,4);u(h),u(P),u(b),d($,()=>a(l),e=>t(l,e)),d(E,()=>a(p),e=>t(p,e)),ie(y,()=>a(n),e=>t(n,e)),d(w,()=>a(_),e=>t(_,e)),d(A,()=>a(v),e=>t(v,e)),d(U,()=>a(f),e=>t(f,e)),j("click",Q,H),j("submit",h,re(G)),z(D,b),Z(),M()}export{Ae as component};
