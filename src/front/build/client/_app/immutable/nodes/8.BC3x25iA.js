import{t as R,a as k}from"../chunks/DVcqKrii.js";import"../chunks/CjgycXNd.js";import{v as q,z as C,A as J,b as e,w as O,$ as H,c as f,s as c,h as t,m as s,r as _,x as K}from"../chunks/ByauXACf.js";import{e as F,s as L}from"../chunks/yVykksX0.js";import{i as Q}from"../chunks/B_L8OCB9.js";import{h as V}from"../chunks/f42NyxNk.js";import{r as p}from"../chunks/CbGyEcOf.js";import{b as m,p as W,t as X,f as Y}from"../chunks/Btjy_5Iy.js";import{i as Z}from"../chunks/DWK7rJLp.js";import{s as aa,a as ea}from"../chunks/DZmdmqJe.js";import{p as ta}from"../chunks/BmfYz5gP.js";import{o as ra}from"../chunks/CAVi3Kxg.js";import{g as P}from"../chunks/DBPlYC7i.js";var oa=R('<p class="info-message"> </p>'),sa=R('<div class="wrapper dash"><div class="container dash"><!> <form class="create-form"><input readonly=""> <input readonly=""> <input type="number" placeholder="Formación Profesional Básica" step="any"> <input type="number" placeholder="Grado Medio" step="any"> <input type="number" placeholder="Grado Superior" step="any"> <button type="submit" class="submit">Actualizar</button> <button type="button" class="cancel">Cancelar</button></form></div></div>');function ha(j,M){q(M,!1);const[N,S]=aa(),x=()=>ea(ta,"$page",N),g=s();let n=s(""),i=s(""),u=s(""),l=s(""),d=s(""),o=s(""),z=s("/api/v1/education-data");ra(async()=>{try{const a=await fetch(e(g));if(!a.ok)throw new Error("No se pudo cargar el recurso.");const r=await a.json();t(n,r.autonomous_community),t(i,r.year),t(u,r.basic_fp),t(l,r.middle_grade),t(d,r.higher_grade)}catch(a){t(o,`Error al cargar los datos: ${a.message}`)}});async function T(){try{const a=await fetch(e(g),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({autonomous_community:e(n),year:parseInt(e(i)),basic_fp:parseFloat(e(u))||0,middle_grade:parseFloat(e(l))||0,higher_grade:parseFloat(e(d))||0})});if(a.ok)t(o,"Registro actualizado correctamente"),setTimeout(()=>P("/education"),1500);else if(a.status===400){const r=await a.json();t(o,`Error en los datos: ${r.error}`)}else a.status===404?t(o,"El recurso que intentas actualizar no existe."):t(o,"Error inesperado al actualizar el registro.")}catch(a){const r=a instanceof Error?a.message:"Error desconocido";t(o,`No se pudo conectar con el servidor: ${r}`)}}function U(){P("/education")}C(()=>x(),()=>{const a=x().params;t(n,decodeURIComponent(a.autonomous_community)),t(i,a.year)}),C(()=>(e(z),e(n),e(i)),()=>{t(g,`${e(z)}/${encodeURIComponent(e(n))}/${e(i)}`)}),J(),Z();var v=sa();V(a=>{H.title="Editar recurso"});var A=f(v),I=f(A);{var B=a=>{var r=oa(),G=f(r,!0);_(r),K(()=>L(G,e(o))),X(3,r,()=>Y,()=>({duration:300})),k(a,r)};Q(I,a=>{e(o)&&a(B)})}var y=c(I,2),h=f(y);p(h);var b=c(h,2);p(b);var $=c(b,2);p($);var E=c($,2);p(E);var w=c(E,2);p(w);var D=c(w,4);_(y),_(A),_(v),m(h,()=>e(n),a=>t(n,a)),m(b,()=>e(i),a=>t(i,a)),m($,()=>e(u),a=>t(u,a)),m(E,()=>e(l),a=>t(l,a)),m(w,()=>e(d),a=>t(d,a)),F("click",D,U),F("submit",y,W(T)),k(j,v),O(),S()}export{ha as component};
