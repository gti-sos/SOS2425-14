import{t as f,h as ye,a as d}from"../chunks/BgiXASfF.js";import"../chunks/BIROYZXv.js";import{p as be,a as Ce,$ as we,s as o,c as n,n as g,g as x,m as Ee,r as i,b as c}from"../chunks/CpQaROA0.js";import{i as A}from"../chunks/D1Iy4rpg.js";import{s as k}from"../chunks/DpvMPi6q.js";import{t as m,f as h}from"../chunks/ByJhS31L.js";import{i as _e}from"../chunks/CZQ4deT6.js";import{o as $e}from"../chunks/BXqaL1Zo.js";var xe=f('<meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0">',1),Ae=f('<p style="color: #fff; text-align: center; font-weight: bold;">Cargando datos...</p>'),ke=f('<p style="color: #fff; text-align: center; font-weight: bold;">Cargando datos...</p>'),Ge=f('<p style="color: #fff; text-align: center; font-weight: bold;">Cargando datos...</p>'),je=f('<p style="color: #fff; text-align: center; font-weight: bold;">Cargando datos...</p>'),ze=f(`<div class="wrapper"><div class="container"><h2 style="text-align: center;">Integraciones <br><i>Francisco Javier</i></h2> <hr style="width: 100%; animation: loadHrGraph 1s; transition: all 0.3s ease;"> <div><div class="article" style="margin-top: 0;"><h3 style="font-size: 1.5em; text-transform: none;">Distribución del Uso del Suelo en Cádiz</h3> <p>Este gráfico representa cómo se reparte la superficie de la provincia de Cádiz entre
					distintos usos del suelo: superficie cultivada, pastos, terreno forestal y superficie no
					agraria. La visualización permite observar de forma clara qué tipo de aprovechamiento
					predomina en el territorio durante el año seleccionado.</p> <a style="color: #fff;" target="_blank"><i>G15 - ocupied-grand-stats</i></a> <figure class="chartjs-figure svelte-47s6as"><!> <canvas id="15Chart"></canvas></figure></div> <div class="article" style="margin-top: 1em;"><h3 style="font-size: 1.5em; text-transform: none;">Accidentes con Animales por Grupo (2023)</h3> <p>Este gráfico muestra cuántos accidentes de tráfico con animales estuvieron relacionados
					con cada grupo animal durante el año 2023. Permite identificar qué tipos de fauna están
					más implicados en este tipo de incidentes según los registros recopilados a nivel
					nacional.</p> <a style="color: #fff;" target="_blank"><i>G20 - accidents-with-animals</i></a> <figure class="chartjs-figure svelte-47s6as"><!> <canvas id="20Chart"></canvas></figure></div> <div class="article" style="margin-top: 0;"><h3 style="font-size: 1.5em; text-transform: none;">Distribución del Consumo Energético por Fuente</h3> <p>Este gráfico radar muestra cómo se reparte el consumo energético entre electricidad, gas y
					otras fuentes en Andalucía durante el año 2021. Esta visualización permite comparar
					fácilmente las prioridades energéticas regionales y su evolución temporal.</p> <a style="color: #fff;" target="_blank"><i>G12 - annual-consumptions</i></a> <figure class="chartjs-figure svelte-47s6as"><!> <canvas id="12Chart"></canvas></figure></div> <div class="article" style="margin-top: 0;"><h3 style="font-size: 1.5em; text-transform: none;">Superficie Actual de los Parques Nacionales</h3> <p>Este gráfico muestra la superficie actual en hectáreas de los distintos parques nacionales
					de España. Permite comparar el tamaño de cada parque natural y analizar cómo varía su
					extensión a lo largo del territorio nacional.</p> <a style="color: #fff;" target="_blank"><i>G13 - national-parks</i></a> <figure class="chartjs-figure svelte-47s6as"><!> <canvas id="13Chart"></canvas></figure></div></div></div></div>`);function qe(Q,V){be(V,!1);const v="https://sos2425-15.onrender.com/api/v1/ocupied-grand-stats/",y="https://sos2425-20.onrender.com/api/v1/accidents-with-animals",b="https://sos2425-12.onrender.com/api/v1/annual-consumptions",C="https://sos2425-13.onrender.com/api/v2/national-parks";let G=[],j=[],z=[],u=[],r=Ee(!0);async function X(){c(r,!0);try{console.log(`Solicitando datos a: ${v}`);const e=await fetch(v,{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`Error en la respuesta: ${e.status}`);G=await e.json(),console.log(`Datos recibidos: ${G.length} registros`),ae()}catch(e){console.error(`ERROR al obtener datos de ${v}: ${e}`),`${e.message}`}finally{c(r,!1)}}let w,L=2021,ee="cadiz";function ae(){var t;const e=G.find(s=>Number(s.year)===Number(L)&&s.province.toLowerCase()===ee.toLowerCase());if(!e)return;const a=(t=document.getElementById("15Chart"))==null?void 0:t.getContext("2d");a&&(w&&(w.destroy(),w=null),w=new Chart(a,{type:"doughnut",data:{labels:["Ground","Grass","Wooded","Non Agrarian Surface"],datasets:[{label:`${e.province.toUpperCase()} - ${L}`,data:[e.ground??0,e.grass??0,e.wooded??0,e.non_agrarian_surface??0],backgroundColor:["#36A2EB","#FFCE56","#FF6384","#4BC0C0"]}]},options:{responsive:!0,plugins:{legend:{labels:{color:"#fff"}},title:{display:!0,text:"Distribución del Uso del Suelo en Cádiz",color:"#fff",font:{size:20,weight:"bold",family:"Arial"}}}}}))}async function te(){c(r,!0);try{console.log(`Solicitando datos a: ${y}`);const e=await fetch(y,{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`Error en la respuesta: ${e.status}`);j=await e.json(),console.log(`Datos recibidos: ${j.length} registros`),re()}catch(e){console.error(`ERROR al obtener datos de ${y}: ${e}`),`${e.message}`}finally{c(r,!1)}}let E;function re(){var Z;const a=j.filter(p=>Number(p.anyo)===2023),t={};for(const p of a){const K=p.animal_group;t[K]=(t[K]||0)+1}const s=Object.keys(t).map(p=>`Grupo ${p}`),l=Object.values(t),W=(Z=document.getElementById("20Chart"))==null?void 0:Z.getContext("2d");W&&(E&&(E.destroy(),E=null),E=new Chart(W,{type:"polarArea",data:{labels:s,datasets:[{label:"Número de accidentes por grupo animal",data:l,backgroundColor:["#36A2EB","#FFCE56","#FF6384","#4BC0C0","#9966FF","#00D98B"]}]},options:{responsive:!0,plugins:{legend:{labels:{color:"#fff"}},title:{display:!0,text:"Accidentes con Animales por Grupo (2023)",color:"#fff",font:{size:20,weight:"bold"}}}}}))}async function oe(){c(r,!0);try{console.log(`Solicitando datos a: ${b}`);const e=await fetch(b,{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`Error en la respuesta: ${e.status}`);z=await e.json(),console.log(`Datos recibidos: ${z.length} registros`),ne()}catch(e){console.error(`ERROR al obtener datos de ${b}: ${e}`),`${e.message}`}finally{c(r,!1)}}let _,O=2021,se="Andalucía";function ne(){var t;const e=z.find(s=>Number(s.year)===Number(O)&&s.aacc.toLowerCase().includes(se.toLowerCase()));if(!e)return;const a=(t=document.getElementById("12Chart"))==null?void 0:t.getContext("2d");a&&(_&&(_.destroy(),_=null),_=new Chart(a,{type:"radar",data:{labels:["Electricidad","Gas","Otros"],datasets:[{label:`${e.aacc} - ${O}`,data:[e.electricity??0,e.gas??0,e.other??0],backgroundColor:"rgba(54, 162, 235, 0.2)",borderColor:"#36A2EB",pointBackgroundColor:"#fff",pointBorderColor:"#36A2EB"}]},options:{responsive:!0,plugins:{legend:{labels:{color:"#fff"}},title:{display:!0,text:"Distribución del Consumo Energético",color:"#fff",font:{size:20,weight:"bold",family:"Arial"}}},scales:{r:{pointLabels:{color:"#fff"},grid:{color:"rgba(255,255,255,0.2)"},angleLines:{color:"rgba(255,255,255,0.2)"},ticks:{color:"#fff",beginAtZero:!0}}}}}))}async function ie(){c(r,!0);try{console.log(`Solicitando datos a: ${C}`);const e=await fetch(C,{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`Error en la respuesta: ${e.status}`);u=await e.json(),console.log(`Datos recibidos: ${u.length} parques`),le()}catch(e){console.error(`ERROR al obtener datos de ${C}: ${e}`),`${e.message}`}finally{c(r,!1)}}let $;function le(){var s;if(!u.length)return;const e=(s=document.getElementById("13Chart"))==null?void 0:s.getContext("2d");if(!e)return;$&&($.destroy(),$=null);const a=u.map(l=>l.national_park),t=u.map(l=>l.current_area);$=new Chart(e,{type:"bar",data:{labels:a,datasets:[{label:"Superficie actual (ha)",data:t,backgroundColor:"#36A2EB"}]},options:{responsive:!0,plugins:{legend:{labels:{color:"#fff"}},title:{display:!0,text:"Superficie Actual de los Parques Nacionales",color:"#fff",font:{size:20,weight:"bold",family:"Arial"}}},scales:{x:{ticks:{color:"#fff"},title:{display:!0,text:"Parque Nacional",color:"#fff"}},y:{ticks:{color:"#fff"},title:{display:!0,text:"Hectáreas",color:"#fff"}}}}})}function ce(e){return new Promise((a,t)=>{if(document.querySelector(`script[src="${e}"]`))return a();const l=document.createElement("script");l.src=e,l.onload=a,l.onerror=t,document.head.appendChild(l)})}$e(async()=>{try{await ce("https://cdn.jsdelivr.net/npm/chart.js"),await X(),await te(),await oe(),await ie()}catch(e){console.error(e)}}),_e();var B=ze();ye(e=>{var a=xe();we.title="Integrations - Francisco Javier",g(2),d(e,a)});var T=n(B),D=o(n(T),4),F=n(D),U=o(n(F),4);k(U,"href",v);var I=o(U,2),de=n(I);{var fe=e=>{var a=Ae();d(e,a)};A(de,e=>{x(r)&&e(fe)})}g(2),i(I),i(F);var R=o(F,2),H=o(n(R),4);k(H,"href",y);var S=o(H,2),ue=n(S);{var pe=e=>{var a=ke();d(e,a)};A(ue,e=>{x(r)&&e(pe)})}g(2),i(S),i(R);var P=o(R,2),J=o(n(P),4);k(J,"href",b);var N=o(J,2),ge=n(N);{var me=e=>{var a=Ge();d(e,a)};A(ge,e=>{x(r)&&e(me)})}g(2),i(N),i(P);var Y=o(P,2),M=o(n(Y),4);k(M,"href",C);var q=o(M,2),he=n(q);{var ve=e=>{var a=je();d(e,a)};A(he,e=>{x(r)&&e(ve)})}g(2),i(q),i(Y),i(D),i(T),i(B),m(3,I,()=>h),m(3,S,()=>h),m(3,N,()=>h),m(3,q,()=>h),m(3,D,()=>h,()=>({duration:400})),d(Q,B),Ce()}export{qe as component};
