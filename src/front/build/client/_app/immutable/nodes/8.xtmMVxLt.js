import{t as R,h as q,a as A}from"../chunks/BgiXASfF.js";import"../chunks/BIROYZXv.js";import{p as J,l as C,e as O,g as e,a as H,$ as K,c as f,s as c,b as t,m as s,r as _,t as L}from"../chunks/CpQaROA0.js";import{e as F,s as Q}from"../chunks/D1bc0aDY.js";import{i as V}from"../chunks/D1Iy4rpg.js";import{r as p}from"../chunks/DpvMPi6q.js";import{t as W,f as X}from"../chunks/ByJhS31L.js";import{b as m,p as Y}from"../chunks/B3q-S7L_.js";import{i as Z}from"../chunks/CZQ4deT6.js";import{s as aa,a as ea}from"../chunks/CiueXfto.js";import{p as ta}from"../chunks/SwLGYh8h.js";import{o as ra}from"../chunks/BXqaL1Zo.js";import{g as P}from"../chunks/DZiRAjQP.js";var oa=R('<p class="info-message"> </p>'),sa=R('<div class="wrapper dash"><div class="container dash"><!> <form class="create-form"><input readonly=""> <input readonly=""> <input type="number" placeholder="Formación Profesional Básica" step="any"> <input type="number" placeholder="Grado Medio" step="any"> <input type="number" placeholder="Grado Superior" step="any"> <button type="submit" class="submit">Actualizar</button> <button type="button" class="cancel">Cancelar</button></form></div></div>');function ha(j,M){J(M,!1);const[N,S]=aa(),I=()=>ea(ta,"$page",N),g=s();let n=s(""),i=s(""),u=s(""),l=s(""),d=s(""),o=s(""),k=s("/api/v1/education-data");ra(async()=>{try{const a=await fetch(e(g));if(!a.ok)throw new Error("No se pudo cargar el recurso.");const r=await a.json();t(n,r.autonomous_community),t(i,r.year),t(u,r.basic_fp),t(l,r.middle_grade),t(d,r.higher_grade)}catch(a){t(o,`Error al cargar los datos: ${a.message}`)}});async function T(){try{const a=await fetch(e(g),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({autonomous_community:e(n),year:parseInt(e(i)),basic_fp:parseFloat(e(u))||0,middle_grade:parseFloat(e(l))||0,higher_grade:parseFloat(e(d))||0})});if(a.ok)t(o,"Registro actualizado correctamente"),setTimeout(()=>P("/education"),1500);else if(a.status===400){const r=await a.json();t(o,`Error en los datos: ${r.error}`)}else a.status===404?t(o,"El recurso que intentas actualizar no existe."):t(o,"Error inesperado al actualizar el registro.")}catch(a){const r=a instanceof Error?a.message:"Error desconocido";t(o,`No se pudo conectar con el servidor: ${r}`)}}function U(){P("/education")}C(()=>I(),()=>{const a=I().params;t(n,decodeURIComponent(a.autonomous_community)),t(i,a.year)}),C(()=>(e(k),e(n),e(i)),()=>{t(g,`${e(k)}/${encodeURIComponent(e(n))}/${e(i)}`)}),O(),Z();var v=sa();q(a=>{K.title="Editar recurso"});var x=f(v),z=f(x);{var B=a=>{var r=oa(),G=f(r,!0);_(r),L(()=>Q(G,e(o))),W(3,r,()=>X,()=>({duration:300})),A(a,r)};V(z,a=>{e(o)&&a(B)})}var y=c(z,2),h=f(y);p(h);var b=c(h,2);p(b);var $=c(b,2);p($);var E=c($,2);p(E);var w=c(E,2);p(w);var D=c(w,4);_(y),_(x),_(v),m(h,()=>e(n),a=>t(n,a)),m(b,()=>e(i),a=>t(i,a)),m($,()=>e(u),a=>t(u,a)),m(E,()=>e(l),a=>t(l,a)),m(w,()=>e(d),a=>t(d,a)),F("click",D,U),F("submit",y,Y(T)),A(j,v),H(),S()}export{ha as component};
