import{t as D,h as Ta,a as k}from"../chunks/C0k3Nw9y.js";import"../chunks/DPNYAhEg.js";import{v as La,w as xa,$ as Ma,c as m,s as t,b as a,m as P,r as u,h as e,x as q,y as c,n as Ra}from"../chunks/cdyx5pLP.js";import{e as L,s as M}from"../chunks/dBgfGCkZ.js";import{i as J}from"../chunks/CEmQKR9v.js";import{e as U,i as z}from"../chunks/D1tosopV.js";import{r as _}from"../chunks/CXYTPRs_.js";import{t as $a,f as ka,b as l,p as ua}from"../chunks/CYTxZMWJ.js";import{i as Da}from"../chunks/BZ6f0h1O.js";import{o as Ga}from"../chunks/CV6rVgxM.js";import{g as Na}from"../chunks/C4SidvwX.js";const Pa=JSON.parse('[{"autonomous_community":"TOTAL","basic_fp":8.1,"middle_grade":36.3,"higher_grade":40,"year":2020},{"autonomous_community":"Andalucia","basic_fp":7.5,"middle_grade":36.7,"higher_grade":37.4,"year":2020},{"autonomous_community":"Aragon","basic_fp":10.6,"middle_grade":36.2,"higher_grade":40.1,"year":2020},{"autonomous_community":"Asturias","basic_fp":5.6,"middle_grade":37.4,"higher_grade":49.3,"year":2020},{"autonomous_community":"Baleares","basic_fp":8.4,"middle_grade":32.5,"higher_grade":23.1,"year":2020},{"autonomous_community":"Canarias","basic_fp":8.2,"middle_grade":28.1,"higher_grade":33.2,"year":2020},{"autonomous_community":"Cantabria","basic_fp":8.4,"middle_grade":42.1,"higher_grade":44.7,"year":2020},{"autonomous_community":"Castilla y Leon","basic_fp":11,"middle_grade":38.2,"higher_grade":42.1,"year":2020},{"autonomous_community":"Castilla-La Mancha","basic_fp":11.8,"middle_grade":34.1,"higher_grade":32.5,"year":2020},{"autonomous_community":"Cataluña","basic_fp":0,"middle_grade":40.4,"higher_grade":41.7,"year":2020},{"autonomous_community":"Comunitat Valenciana","basic_fp":11.6,"middle_grade":44.2,"higher_grade":46.5,"year":2020},{"autonomous_community":"Extremadura","basic_fp":10.4,"middle_grade":34.8,"higher_grade":33.6,"year":2020},{"autonomous_community":"Galicia","basic_fp":11.7,"middle_grade":43.9,"higher_grade":53,"year":2020},{"autonomous_community":"Madrid","basic_fp":8.7,"middle_grade":27,"higher_grade":36.5,"year":2020},{"autonomous_community":"Murcia","basic_fp":12.7,"middle_grade":30.6,"higher_grade":35.1,"year":2020},{"autonomous_community":"Navarra","basic_fp":8.8,"middle_grade":32.6,"higher_grade":31.7,"year":2020},{"autonomous_community":"Pais Vasco","basic_fp":11.6,"middle_grade":37.5,"higher_grade":55.3,"year":2020},{"autonomous_community":"La Rioja","basic_fp":11.6,"middle_grade":44.5,"higher_grade":40.7,"year":2020},{"autonomous_community":"Ceuta","basic_fp":21.6,"middle_grade":45.7,"higher_grade":35.3,"year":2020},{"autonomous_community":"Melilla","basic_fp":21.6,"middle_grade":31.5,"higher_grade":32.5,"year":2020},{"autonomous_community":"TOTAL","basic_fp":7.6,"middle_grade":36.5,"higher_grade":42.5,"year":2021},{"autonomous_community":"Andalucia","basic_fp":7.3,"middle_grade":37.4,"higher_grade":41.2,"year":2021},{"autonomous_community":"Aragon","basic_fp":10.2,"middle_grade":36,"higher_grade":42.6,"year":2021},{"autonomous_community":"Asturias","basic_fp":4.9,"middle_grade":37.5,"higher_grade":54.8,"year":2021},{"autonomous_community":"Baleares","basic_fp":8,"middle_grade":36.1,"higher_grade":26.5,"year":2021},{"autonomous_community":"Canarias","basic_fp":7.2,"middle_grade":28.2,"higher_grade":35,"year":2021},{"autonomous_community":"Cantabria","basic_fp":7.1,"middle_grade":39.9,"higher_grade":45.9,"year":2021},{"autonomous_community":"Castilla y Leon","basic_fp":10.4,"middle_grade":38.2,"higher_grade":44.7,"year":2021},{"autonomous_community":"Castilla-La Mancha","basic_fp":11.5,"middle_grade":35.8,"higher_grade":37.3,"year":2021},{"autonomous_community":"Cataluña","basic_fp":0,"middle_grade":37.7,"higher_grade":40.3,"year":2021},{"autonomous_community":"Comunitat Valenciana","basic_fp":10.9,"middle_grade":44.7,"higher_grade":48.9,"year":2021},{"autonomous_community":"Extremadura","basic_fp":9.9,"middle_grade":37.2,"higher_grade":37,"year":2021},{"autonomous_community":"Galicia","basic_fp":10.6,"middle_grade":43.8,"higher_grade":56.1,"year":2021},{"autonomous_community":"Madrid","basic_fp":8.2,"middle_grade":28.8,"higher_grade":41.5,"year":2021},{"autonomous_community":"Murcia","basic_fp":12.5,"middle_grade":31.1,"higher_grade":38.1,"year":2021},{"autonomous_community":"Navarra","basic_fp":8.4,"middle_grade":32.9,"higher_grade":34.1,"year":2021},{"autonomous_community":"Pais Vasco","basic_fp":11.2,"middle_grade":35.8,"higher_grade":55,"year":2021},{"autonomous_community":"La Rioja","basic_fp":11.1,"middle_grade":42.5,"higher_grade":44.5,"year":2021},{"autonomous_community":"Ceuta","basic_fp":20.1,"middle_grade":43.7,"higher_grade":37.2,"year":2021},{"autonomous_community":"Melilla","basic_fp":19.7,"middle_grade":30.8,"higher_grade":32.2,"year":2021},{"autonomous_community":"TOTAL","basic_fp":7.5,"middle_grade":37,"higher_grade":41.7,"year":2022},{"autonomous_community":"Andalucia","basic_fp":6.9,"middle_grade":37.5,"higher_grade":40.6,"year":2022},{"autonomous_community":"Aragon","basic_fp":10,"middle_grade":36.7,"higher_grade":40.8,"year":2022},{"autonomous_community":"Asturias","basic_fp":4.9,"middle_grade":35.9,"higher_grade":50.3,"year":2022},{"autonomous_community":"Baleares","basic_fp":8.2,"middle_grade":37.5,"higher_grade":27.5,"year":2022},{"autonomous_community":"Canarias","basic_fp":7.2,"middle_grade":28.8,"higher_grade":35.9,"year":2022},{"autonomous_community":"Cantabria","basic_fp":6.9,"middle_grade":40.3,"higher_grade":45,"year":2022},{"autonomous_community":"Castilla y Leon","basic_fp":10.1,"middle_grade":37.8,"higher_grade":42.2,"year":2022},{"autonomous_community":"Castilla-La Mancha","basic_fp":11.1,"middle_grade":34,"higher_grade":35,"year":2022},{"autonomous_community":"Cataluña","basic_fp":0,"middle_grade":39.2,"higher_grade":40.1,"year":2022},{"autonomous_community":"Comunitat Valenciana","basic_fp":10.5,"middle_grade":45.5,"higher_grade":50,"year":2022},{"autonomous_community":"Extremadura","basic_fp":9.9,"middle_grade":35.8,"higher_grade":35.2,"year":2022},{"autonomous_community":"Galicia","basic_fp":10.4,"middle_grade":42.8,"higher_grade":53.7,"year":2022},{"autonomous_community":"Madrid","basic_fp":8.6,"middle_grade":29.9,"higher_grade":40.6,"year":2022},{"autonomous_community":"Murcia","basic_fp":12.2,"middle_grade":31.3,"higher_grade":35.8,"year":2022},{"autonomous_community":"Navarra","basic_fp":6.7,"middle_grade":31.4,"higher_grade":33,"year":2022},{"autonomous_community":"Pais Vasco","basic_fp":11,"middle_grade":36.4,"higher_grade":53.3,"year":2022},{"autonomous_community":"La Rioja","basic_fp":10.2,"middle_grade":41.8,"higher_grade":42.3,"year":2022},{"autonomous_community":"Ceuta","basic_fp":20.2,"middle_grade":43.5,"higher_grade":36,"year":2022},{"autonomous_community":"Melilla","basic_fp":20.5,"middle_grade":31.2,"higher_grade":29,"year":2022},{"autonomous_community":"TOTAL","basic_fp":7.6,"middle_grade":36.9,"higher_grade":41.2,"year":2023},{"autonomous_community":"Andalucia","basic_fp":7.2,"middle_grade":36.8,"higher_grade":41,"year":2023},{"autonomous_community":"Aragon","basic_fp":9.8,"middle_grade":36.3,"higher_grade":41.1,"year":2023},{"autonomous_community":"Asturias","basic_fp":5.1,"middle_grade":35.5,"higher_grade":49.2,"year":2023},{"autonomous_community":"Baleares","basic_fp":8.1,"middle_grade":34.9,"higher_grade":24.6,"year":2023},{"autonomous_community":"Canarias","basic_fp":7.3,"middle_grade":28.4,"higher_grade":35,"year":2023},{"autonomous_community":"Cantabria","basic_fp":7,"middle_grade":39.7,"higher_grade":44.8,"year":2023},{"autonomous_community":"Castilla y Leon","basic_fp":9.9,"middle_grade":37.6,"higher_grade":41.8,"year":2023},{"autonomous_community":"Castilla-La Mancha","basic_fp":11.3,"middle_grade":32.7,"higher_grade":34.8,"year":2023},{"autonomous_community":"Cataluña","basic_fp":0.6,"middle_grade":40.6,"higher_grade":38.4,"year":2023},{"autonomous_community":"Comunitat Valenciana","basic_fp":10.1,"middle_grade":44.9,"higher_grade":49.5,"year":2023},{"autonomous_community":"Extremadura","basic_fp":10.1,"middle_grade":36,"higher_grade":36,"year":2023},{"autonomous_community":"Galicia","basic_fp":10,"middle_grade":41,"higher_grade":51.4,"year":2023},{"autonomous_community":"Madrid","basic_fp":8.4,"middle_grade":31.1,"higher_grade":41.2,"year":2023},{"autonomous_community":"Murcia","basic_fp":12.4,"middle_grade":31.5,"higher_grade":35.5,"year":2023},{"autonomous_community":"Navarra","basic_fp":7.4,"middle_grade":31.4,"higher_grade":32.7,"year":2023},{"autonomous_community":"Pais Vasco","basic_fp":11.1,"middle_grade":35.4,"higher_grade":50.7,"year":2023},{"autonomous_community":"La Rioja","basic_fp":11.6,"middle_grade":42.9,"higher_grade":40.7,"year":2023},{"autonomous_community":"Ceuta","basic_fp":21.8,"middle_grade":48.2,"higher_grade":37.4,"year":2023},{"autonomous_community":"Melilla","basic_fp":23.3,"middle_grade":31.4,"higher_grade":30.1,"year":2023}]');var Sa=D('<p class="info-message"> </p>'),Ba=D('<option style="background-color: var(--bg); color: #fff;"> </option>'),Ia=D('<form class="create-form"><select name="ccaa" style="	color: #ffffff68;" id="ccaa" placeholder="Comunidad autónoma" required><option style="color: aliceblue; background-color: var(--bg);" disabled selected>Comunidad autónoma</option><!></select> <input type="number" placeholder="Año" required> <input type="number" placeholder="Formación Profesional Básica" required step="any"> <input type="number" placeholder="Grado Medio" required step="any"> <input type="number" placeholder="Grado Superior" required step="any"> <button type="submit" class="submit">Añadir</button> <button type="button" class="cancel">Cancelar</button></form>'),qa=D('<option style="background-color: var(--bg); color: #fff;"> </option>'),ja=D('<form class="create-form"><input type="number" placeholder="Desde año"> <input type="number" placeholder="Hasta año"> <input type="number" placeholder="Año exacto"> <select name="ccaa" style="	color: #ffffff68;" id="ccaa" placeholder="Comunidad autónoma"><option style="color: aliceblue; background-color: var(--bg);" disabled selected>Comunidad autónoma</option><!></select> <input type="number" placeholder="Formación Profesional Básica exacto" step="any"> <input type="number" placeholder="Formación Prof. Básica desde" step="any"> <input type="number" placeholder="Formación Prof. Básica hasta" step="any"> <input type="number" placeholder="Grado Medio exacto" step="any"> <input type="number" placeholder="Grado Medio desde" step="any"> <input type="number" placeholder="Grado Medio hasta" step="any"> <input type="number" placeholder="Grado Superior exacto" step="any"> <input type="number" placeholder="Grado Superior desde" step="any"> <input type="number" placeholder="Grado Superior hasta" step="any"> <input type="number" placeholder="Limitar a..."> <input type="number" placeholder="Comenzar desde..."> <button class="btn" type="submit">Buscar</button></form>'),Oa=D('<tr><td> </td><td> </td><td> </td><td> </td><td> </td><td class="actions"><button class="btn-circle" title="Editar Registro"><i class="fas fa-pen"></i></button> <button class="btn-circle" title="Eliminar Registro"><i class="fas fa-times"></i></button></td></tr>'),Fa=D('<div class="wrapper dash"><div class="container dash"><!> <div class="header"><h3>Datos de Educación</h3> <div class="actions"><button class="btn"><i class="fas fa-search"></i> Buscar</button> <button class="btn"><i class="fas fa-plus"></i> Crear</button> <button class="btn"><i class="fas fa-sync-alt"></i> Recargar</button> <button class="btn"><i class="fas fa-trash-alt"></i> Eliminar</button></div></div> <!> <!> <div class="seeker"></div> <div class="table-container"><table><thead><tr><th>Comunidad Autónoma</th><th>Año</th><th>Formación Profesional Básica</th><th>Grado Medio</th><th>Grado Superior</th><th>Acciones</th></tr></thead></table> <div class="scroll-body"><table><tbody></tbody></table></div></div></div></div>');function ae(ma,ca){La(ca,!1);const Y=[...new Set(Pa.map(i=>i.autonomous_community))];let R="/api/v1/education-data",v=P([]),d=P(""),G=P(!1),S=P(!1),h=P({autonomous_community:"",year:"",basic_fp:"",middle_grade:"",higher_grade:""}),o=P({from:"",to:"",year:"",autonomous_community:"",basic_fp_from:"",basic_fp_to:"",middle_grade_from:"",middle_grade_to:"",higher_grade_from:"",higher_grade_to:"",limit:"",offset:""});async function N(){try{const i=await fetch(R);if(!i.ok){i.status===404?e(d,"No se encontraron datos de educación."):i.status===500?e(d,"Error del servidor. Intenta más tarde."):e(d,"Error inesperado"),e(v,[]);return}e(v,await i.json())}catch(i){console.error("[GET] Error cargando datos:",i),e(d,"No se pudo conectar con el servidor."),e(v,[])}setTimeout(()=>e(d,""),2e3)}function _a(){e(S,!a(S)),e(G,!1),a(S)||(e(o,{from:"",to:"",year:"",autonomous_community:"",basic_fp:"",middle_grade:"",higher_grade:"",basic_fp_from:"",basic_fp_to:"",middle_grade_from:"",middle_grade_to:"",higher_grade_from:"",higher_grade_to:"",limit:"",offset:""}),e(d,""),N())}function la(){e(G,!a(G)),e(S,!1)}async function ga(){const i=new URLSearchParams;for(const[r,s]of Object.entries(a(o)))s!==""&&s!==null&&s!==void 0&&i.append(r,s);try{const r=await fetch(`${R}?${i.toString()}`);if(!r.ok){r.status===400?e(d,"Parámetros de búsqueda no válidos."):r.status===500?e(d,"Error interno del servidor al buscar."):e(d,"Error inesperado"),e(v,[]);return}e(v,await r.json()),a(v).length===0?e(d,"No se encontraron resultados para tu búsqueda."):e(d,`Se encontraron ${a(v).length} resultados.`)}catch(r){console.error("[SEARCH] Error al buscar:",r),e(d,"No se pudo conectar con el servidor."),e(v,[])}setTimeout(()=>e(d,""),2e3)}async function ha(){try{const i=await fetch(R,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a(h))}),r=await i.json();i.status===201?(e(d,"Registro creado correctamente"),e(G,!1),pa(),await N()):i.status===400?e(d,`Datos inválidos: ${r.error||"Revisa los campos."}`):i.status===409?e(d,"Ya existe un registro con esos identificadores."):e(d,`Error inesperado (${i.status}) al procesar la petición.`)}catch(i){console.error("[CREATE] Error:",i),e(d,"No se pudo conectar con el servidor.")}setTimeout(()=>e(d,""),2e3)}function pa(){e(h,{autonomous_community:"",year:"",basic_fp:"",middle_grade:"",higher_grade:""})}async function fa(){const i=`${R}/loadInitialData?reset=true`,r=`${R}/loadInitialData`;try{if(a(v).length>0){if(!confirm("There are existing records. Do you want to reload the initial data and reset everything?"))return;const p=await fetch(i);if(!p.ok)throw new Error(`Error ${p.status}`);e(d,"🔄 Initial data reloaded with reset.")}else{const s=await fetch(r);if(!s.ok)throw new Error(`Error ${s.status}`);e(d,"📥 Initial data loaded.")}await N()}catch(s){console.error("[LOAD INITIAL DATA] Error:",s),e(d,"❌ Error loading initial data.")}setTimeout(()=>{e(d,"")},3e3)}async function ya(){if(confirm("¿Estás seguro de que quieres eliminar todos los registros de educación?")){try{const r=await fetch(R,{method:"DELETE"});r.status===200?(e(d,"Todos los registros de educación han sido eliminados."),await N()):r.status===404?e(d,"No hay registros de educación que eliminar."):e(d,"Error al eliminar los registros de educación.")}catch(r){console.error("[DELETE] Error eliminando registros de educación:",r),e(d,"Error al eliminar los registros de educación.")}setTimeout(()=>{e(d,"")},2e3)}}async function ba(i,r){try{const s=await fetch(`${R}/${i}/${r}`,{method:"DELETE"});s.status===200?(e(d,`Registro de educación en ${i} (${r}) eliminado correctamente.`),await N()):s.status===404?e(d,"Registro de educación no encontrado."):e(d,"Error al eliminar el registro de educación.")}catch(s){console.error("[DELETE] Error eliminando el registro de educación:",s),e(d,"Error al eliminar el registro de educación.")}setTimeout(()=>{e(d,"")},2e3)}Ga(async()=>{await N()}),Da();var j=Fa();Ta(i=>{Ma.title="Datos de Educación"});var K=m(j),Q=m(K);{var va=i=>{var r=Sa(),s=m(r,!0);u(r),q(()=>M(s,a(d))),$a(3,r,()=>ka,()=>({duration:300})),k(i,r)};J(Q,i=>{a(d)&&i(va)})}var O=t(Q,2),W=t(m(O),2),X=m(W),Z=t(X,2),aa=t(Z,2),Ea=t(aa,2);u(W),u(O);var ea=t(O,2);{var Ca=i=>{var r=Ia(),s=m(r),p=m(s);p.value=p.__value="";var $=t(p);U($,1,()=>Y,z,(g,y)=>{var b=Ba(),T={},x=m(b,!0);u(b),q(()=>{T!==(T=a(y))&&(b.value=(b.__value=a(y))??""),M(x,a(y))}),k(g,b)}),u(s);var f=t(s,2);_(f);var E=t(f,2);_(E);var C=t(E,2);_(C);var A=t(C,2);_(A);var w=t(A,4);u(r),l(f,()=>a(h).year,g=>c(h,a(h).year=g)),l(E,()=>a(h).basic_fp,g=>c(h,a(h).basic_fp=g)),l(C,()=>a(h).middle_grade,g=>c(h,a(h).middle_grade=g)),l(A,()=>a(h).higher_grade,g=>c(h,a(h).higher_grade=g)),L("click",w,()=>e(G,!1)),L("submit",r,ua(ha)),k(i,r)};J(ea,i=>{a(G)&&i(Ca)})}var ra=t(ea,2);{var Aa=i=>{var r=ja(),s=m(r);_(s);var p=t(s,2);_(p);var $=t(p,2);_($);var f=t($,2),E=m(f);E.value=E.__value="";var C=t(E);U(C,1,()=>Y,z,(n,H)=>{var I=qa(),na={},wa=m(I,!0);u(I),q(()=>{na!==(na=a(H))&&(I.value=(I.__value=a(H))??""),M(wa,a(H))}),k(n,I)}),u(f);var A=t(f,2);_(A);var w=t(A,2);_(w);var g=t(w,2);_(g);var y=t(g,2);_(y);var b=t(y,2);_(b);var T=t(b,2);_(T);var x=t(T,2);_(x);var B=t(x,2);_(B);var F=t(B,2);_(F);var V=t(F,2);_(V);var sa=t(V,2);_(sa),Ra(2),u(r),l(s,()=>a(o).from,n=>c(o,a(o).from=n)),l(p,()=>a(o).to,n=>c(o,a(o).to=n)),l($,()=>a(o).year,n=>c(o,a(o).year=n)),l(A,()=>a(o).basic_fp,n=>c(o,a(o).basic_fp=n)),l(w,()=>a(o).basic_fp_from,n=>c(o,a(o).basic_fp_from=n)),l(g,()=>a(o).basic_fp_to,n=>c(o,a(o).basic_fp_to=n)),l(y,()=>a(o).middle_grade,n=>c(o,a(o).middle_grade=n)),l(b,()=>a(o).middle_grade_from,n=>c(o,a(o).middle_grade_from=n)),l(T,()=>a(o).middle_grade_to,n=>c(o,a(o).middle_grade_to=n)),l(x,()=>a(o).higher_grade,n=>c(o,a(o).higher_grade=n)),l(B,()=>a(o).higher_grade_from,n=>c(o,a(o).higher_grade_from=n)),l(F,()=>a(o).higher_grade_to,n=>c(o,a(o).higher_grade_to=n)),l(V,()=>a(o).limit,n=>c(o,a(o).limit=n)),l(sa,()=>a(o).offset,n=>c(o,a(o).offset=n)),L("submit",r,ua(ga)),k(i,r)};J(ra,i=>{a(S)&&i(Aa)})}var oa=t(ra,4),ia=t(m(oa),2),ta=m(ia),da=m(ta);U(da,5,()=>a(v),z,(i,r)=>{var s=Oa(),p=m(s),$=m(p,!0);u(p);var f=t(p),E=m(f,!0);u(f);var C=t(f),A=m(C,!0);u(C);var w=t(C),g=m(w,!0);u(w);var y=t(w),b=m(y,!0);u(y);var T=t(y),x=m(T),B=t(x,2);u(T),u(s),q(()=>{M($,a(r).autonomous_community),M(E,a(r).year),M(A,a(r).basic_fp),M(g,a(r).middle_grade),M(b,a(r).higher_grade)}),L("click",x,()=>Na(`/education/edit/${encodeURIComponent(a(r).autonomous_community)}/${a(r).year}`)),L("click",B,()=>ba(a(r).autonomous_community,a(r).year)),k(i,s)}),u(da),u(ta),u(ia),u(oa),u(K),u(j),L("click",X,_a),L("click",Z,la),L("click",aa,fa),L("click",Ea,ya),k(ma,j),xa()}export{ae as component};
