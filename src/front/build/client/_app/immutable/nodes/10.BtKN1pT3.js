import{t as m,h as da,a as f}from"../chunks/CcBKTLYU.js";import"../chunks/BQvSbhnN.js";import{p as ua,t as C,c as s,g as e,a as fa,$ as ma,s as d,b as u,m as y,n as pa,i as L,r as n}from"../chunks/B9KnJm2w.js";import{e as R,s as P}from"../chunks/b-klYKnl.js";import{i as $}from"../chunks/DRx51zI4.js";import{e as W,i as H}from"../chunks/CVAR8tF5.js";import{t as V,f as U}from"../chunks/PRg3Qw8M.js";import{b as q}from"../chunks/CmRUGO1p.js";import{i as ha}from"../chunks/B7KipWS9.js";import{o as va}from"../chunks/BKuOihLL.js";var ga=m('<meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0">',1),_a=m("<option> </option>"),ba=m("<p>Cargando Datos...</p>"),ya=m('<p style="background-color: rgb(247, 111, 111); padding: 10px 20px;"> </p>'),xa=m("<option> </option>"),Ca=m('<figure class="chartjs-figure svelte-xi2902"><canvas id="barChart"></canvas></figure>'),wa=m(`<div><div class="article"><h3 style="font-size: 1.5em; text-transform: none;">Evolución temporal de las tasas de matriculación por nivel educativo</h3> <p>Visualiza cómo han cambiado las tasas de matriculación en Formación Profesional Básica,
						de Grado Medio y de Grado Superior a lo largo del tiempo y entre distintas comunidades
						autónomas.</p> <br> <figure class="highcharts-figure svelte-xi2902"><div id="container"><!> <!></div></figure></div> <div class="article" style="margin-top: 0;"><h3 style="font-size: 1.5em; text-transform: none;">Distribución de matriculados por nivel educativo en el año seleccionado</h3> <p>Compara el número de matriculados en los distintos niveles de Formación Profesional
						durante un año específico en la comunidad autónoma seleccionada, permitiendo analizar la
						distribución entre FP Básica, Grado Medio y Grado Superior.</p> <div class="graph-container" style="background: none; box-shadow: none; padding: 0.5em 0; margin-top: -1em; font-size: 90%;"><h3 style="font-size: 1.2em; text-transform: none; font-weight: 500;">Selecciona el Año:</h3> <select class="custom-select"><option disabled>Selecciona un año</option><!></select></div> <!></div></div>`),Ea=m('<div class="wrapper"><div class="container"><h2>Gráficas de education-data</h2> <hr style="width: 55em; animation: loadHrGraph 1s; transition: all 0.3s ease;"> <div class="graph-container" style="background: none; box-shadow: none; padding: 0.5em 0;"><h3>Selecciona la comunidad autónoma:</h3> <select class="custom-select" style="width: 150%;"><option disabled>Selecciona una comunidad</option><!></select></div> <!></div></div>');function za(Y,J){ua(J,!1);let K="/api/v1/education-data",g=[],_=y([]),F=y(!0),p=y(""),z=y(!1);const Q=["Andalucia","Aragon","Asturias","Baleares","Canarias","Cantabria","Castilla-La Mancha","Castilla y Leon","Cataluña","Comunitat Valenciana","Extremadura","Galicia","Madrid","Murcia","Navarra","Pais Vasco","La Rioja","Ceuta y Melilla","TOTAL"];let x=y(""),h=y("");function X(){u(p,""),u(z,!0),D()}async function D(){u(F,!0),u(p,"");const t=`${K}?autonomous_community=${encodeURIComponent(e(h))}`;try{console.log(`Solicitando datos a: ${t}`);const a=await fetch(t,{method:"GET"});if(!a.ok)throw new Error(`Error en la respuesta: ${a.status}`);g=await a.json(),console.log(`Datos recibidos: ${g.length} registros para ${e(h)}`),u(_,[...new Set(g.map(l=>l.year))].sort()),Z(),N()}catch(a){console.error(`ERROR al obtener datos de ${t}: ${a}`),u(p,`Error al cargar datos: ${a.message}`)}finally{u(F,!1)}}function Z(){if(g.length===0){u(p,"No hay datos disponibles para la comunidad seleccionada");return}const t=[],a=[],r=[];e(_).forEach(l=>{const o=g.find(A=>String(A.year)===String(l));t.push((o==null?void 0:o.basic_fp)??0),a.push((o==null?void 0:o.middle_grade)??0),r.push((o==null?void 0:o.higher_grade)??0)}),Highcharts.chart("container",{chart:{type:"column",backgroundColor:"#052a42",spacing:[30,25,30,25]},title:{text:"Evolución de las Tasas de Matriculación",align:"left",style:{color:"#fff",fontWeight:"800"}},subtitle:{text:`Formación Profesional en ${e(h)}`,align:"left",style:{color:"#fff",fontWeight:"bold"}},yAxis:{title:{text:"Número de Matriculados",style:{color:"#fff",fontWeight:"800"}},labels:{style:{color:"#fff"}},gridLineColor:"#ffffff33"},xAxis:{categories:e(_),title:{text:"AÑO",style:{color:"#fff",fontWeight:"800"}},labels:{style:{color:"#fff"}}},legend:{layout:"vertical",align:"right",verticalAlign:"middle",itemStyle:{color:"#fff"}},plotOptions:{area:{fillOpacity:.5,marker:{enabled:!1}},series:{label:{connectorAllowed:!1}}},series:[{name:"FP Básica",data:t,color:"#36A2EB"},{name:"Grado Medio",data:a,color:"#FFCE56"},{name:"Grado Superior",data:r,color:"#FF6384"}],responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"}}}]}})}let w;function N(){var l;const t=e(x)||Math.max(...e(_)),a=g.find(o=>Number(o.year)===Number(t));if(!a)return;const r=(l=document.getElementById("barChart"))==null?void 0:l.getContext("2d");r&&(w&&(w.destroy(),w=null),w=new Chart(r,{type:"bar",data:{labels:["FP Básica","Grado Medio","Grado Superior"],datasets:[{label:`${e(h)} - ${t}`,data:[a.basic_fp??0,a.middle_grade??0,a.higher_grade??0],backgroundColor:["#36A2EB","#FFCE56","#FF6384"]}]},options:{responsive:!0,plugins:{legend:{labels:{color:"#fff"}},title:{display:!0,text:"Distribución de Matrículas por Nivel Educativo",color:"#fff",font:{size:20,weight:"bold",family:"Arial"}}},scales:{x:{ticks:{color:"#fff"},title:{display:!0,text:"Nivel Educativo",color:"#fff"}},y:{ticks:{color:"#fff"},title:{display:!0,text:"Número de Matriculados",color:"#fff"}}}}}))}function b(t){return new Promise((a,r)=>{if(document.querySelector(`script[src="${t}"]`))return a();const o=document.createElement("script");o.src=t,o.onload=a,o.onerror=r,document.head.appendChild(o)})}va(async()=>{try{await b("https://code.highcharts.com/highcharts.js"),await b("https://code.highcharts.com/modules/series-label.js"),await b("https://code.highcharts.com/modules/exporting.js"),await b("https://code.highcharts.com/modules/export-data.js"),await b("https://code.highcharts.com/modules/accessibility.js"),await b("https://cdn.jsdelivr.net/npm/chart.js"),await D()}catch(t){u(p,`Error cargando scripts de HighCharts: ${err}`),console.error(t)}}),ha();var M=Ea();da(t=>{var a=ga();ma.title="Graphs - Education Data",pa(2),f(t,a)});var O=s(M),G=d(s(O),4),E=d(s(G),2);C(()=>{e(h),L(()=>{})});var B=s(E);B.value=B.__value="";var aa=d(B);W(aa,1,()=>Q,H,(t,a)=>{var r=_a(),l={},o=s(r,!0);n(r),C(()=>{l!==(l=e(a))&&(r.value=(r.__value=e(a))??""),P(o,e(a))}),f(t,r)}),n(E),n(G);var ea=d(G,2);{var ta=t=>{var a=wa(),r=s(a),l=d(s(r),6),o=s(l),A=s(o);{var oa=i=>{var c=ba();f(i,c)};$(A,i=>{e(F)&&i(oa)})}var ra=d(A,2);{var ia=i=>{var c=ya(),v=s(c,!0);n(c),C(()=>P(v,e(p))),f(i,c)};$(ra,i=>{e(p)&&i(ia)})}n(o),n(l),n(r);var T=d(r,2),j=d(s(T),4),S=d(s(j),2);C(()=>{e(x),L(()=>{e(_)})});var k=s(S);k.value=k.__value="";var sa=d(k);W(sa,1,()=>e(_),H,(i,c)=>{var v=xa(),I={},ca=s(v,!0);n(v),C(()=>{I!==(I=e(c))&&(v.value=(v.__value=e(c))??""),P(ca,e(c))}),f(i,v)}),n(S),n(j);var na=d(j,2);{var la=i=>{var c=Ca();V(3,c,()=>U),f(i,c)};$(na,i=>{e(x)&&i(la)})}n(T),n(a),q(S,()=>e(x),i=>u(x,i)),R("change",S,N),V(3,a,()=>U,()=>({duration:400})),f(t,a)};$(ea,t=>{e(z)&&t(ta)})}n(O),n(M),q(E,()=>e(h),t=>u(h,t)),R("change",E,X),f(Y,M),fa()}export{za as component};
