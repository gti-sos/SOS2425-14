import{t as U,a as A}from"../chunks/DVcqKrii.js";import"../chunks/CjgycXNd.js";import{v as O,z as C,A as F,b as t,w as G,$ as H,c as f,s as c,m as s,h as r,r as _,x as K}from"../chunks/ByauXACf.js";import{e as R,s as L}from"../chunks/yVykksX0.js";import{i as Q}from"../chunks/B_L8OCB9.js";import{h as V}from"../chunks/f42NyxNk.js";import{r as p}from"../chunks/CbGyEcOf.js";import{b as u,p as W,t as X,f as Y}from"../chunks/Btjy_5Iy.js";import{i as Z}from"../chunks/DWK7rJLp.js";import{s as ee,a as te}from"../chunks/DZmdmqJe.js";import{p as re}from"../chunks/Cgt--c97.js";import{o as ae}from"../chunks/CAVi3Kxg.js";import{g as k}from"../chunks/IfJAF4wA.js";var oe=U('<p class="info-message"> </p>'),se=U('<div class="wrapper dash"><div class="container dash"><!> <form class="create-form"><input readonly=""> <input readonly=""> <input placeholder="Número de delitos"> <input placeholder="Número de ciberseguridad"> <input placeholder="Número de arrestados/investigados"> <button type="submit" class="submit">Actualizar</button> <button type="button" class="cancel">Cancelar</button></form></div></div>');function be(j,P){O(P,!1);const[T,D]=ee(),I=()=>te(re,"$page",T),v=s();let i=s(""),n=s(""),m=s(""),l=s(""),d=s(""),o=s(""),N=s("/api/v1/cybercrime-data");ae(async()=>{try{const e=await fetch(t(v));if(!e.ok)throw new Error("No se pudo cargar el recurso.");const a=await e.json();r(i,a.autonomous_community),r(n,a.year),r(m,a.criminal_ofense),r(l,a.cybersecurity),r(d,a.arrested_investigated)}catch(e){r(o,`Error al cargar los datos: ${e.message}`)}});async function M(){try{const e=await fetch(t(v),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({autonomous_community:t(i),year:parseInt(t(n)),criminal_ofense:t(m),cybersecurity:t(l),arrested_investigated:parseInt(t(d))})});if(e.ok)r(o,"Registro actualizado correctamente"),setTimeout(()=>k("/cybercrime"),1500);else if(e.status===400){const a=await e.json();r(o,`Error en los datos: ${a.error}`)}else e.status===404?r(o,"El recurso que intentas actualizar no existe."):r(o,"Error inesperado al actualizar el registro.")}catch(e){const a=e instanceof Error?e.message:"Error desconocido";r(o,`No se pudo conectar con el servidor: ${a}`)}}function S(){k("/cybercrime")}C(()=>I(),()=>{const e=I().params;r(i,decodeURIComponent(e.autonomous_community)),r(n,e.year),r(m,decodeURIComponent(e.criminal_ofense))}),C(()=>(t(N),t(i),t(n)),()=>{r(v,`${t(N)}/${encodeURIComponent(t(i))}/${t(n)}`)}),F(),Z();var y=se();V(e=>{H.title="Editar recurso"});var x=f(y),z=f(x);{var q=e=>{var a=oe(),J=f(a,!0);_(a),K(()=>L(J,t(o))),X(3,a,()=>Y,()=>({duration:300})),A(e,a)};Q(z,e=>{t(o)&&e(q)})}var g=c(z,2),b=f(g);p(b);var h=c(b,2);p(h);var $=c(h,2);p($);var E=c($,2);p(E);var w=c(E,2);p(w);var B=c(w,4);_(g),_(x),_(y),u(b,()=>t(i),e=>r(i,e)),u(h,()=>t(n),e=>r(n,e)),u($,()=>t(m),e=>r(m,e)),u(E,()=>t(l),e=>r(l,e)),u(w,()=>t(d),e=>r(d,e)),R("click",B,S),R("submit",g,W(M)),A(j,y),G(),D()}export{be as component};
