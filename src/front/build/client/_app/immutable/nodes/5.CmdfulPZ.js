import{t as U,h as O,a as C}from"../chunks/tvbMF9Pj.js";import"../chunks/V6KxLFIZ.js";import{t as F,z as R,A as G,b as t,v as H,$ as K,c as f,s as c,m as s,h as r,r as _,w as L}from"../chunks/gUvyREcO.js";import{e as k,s as Q}from"../chunks/wr67jiHF.js";import{i as V}from"../chunks/DoNM67fw.js";import{r as p}from"../chunks/5kF7woBx.js";import{t as W,f as X}from"../chunks/DQyGuE4Y.js";import{b as u,p as Y}from"../chunks/CQDDud96.js";import{i as Z}from"../chunks/DdSIFJQO.js";import{s as ee,a as te}from"../chunks/Ctlj-CgM.js";import{p as re}from"../chunks/BE-VA-oF.js";import{o as ae}from"../chunks/WRe_eenc.js";import{g as x}from"../chunks/DDgU0adY.js";var oe=U('<p class="info-message"> </p>'),se=U('<div class="wrapper dash"><div class="container dash"><!> <form class="create-form"><input readonly=""> <input readonly=""> <input placeholder="Número de delitos"> <input placeholder="Número de ciberseguridad"> <input placeholder="Número de arrestados/investigados"> <button type="submit" class="submit">Actualizar</button> <button type="button" class="cancel">Cancelar</button></form></div></div>');function be(j,P){F(P,!1);const[T,D]=ee(),I=()=>te(re,"$page",T),v=s();let i=s(""),n=s(""),m=s(""),l=s(""),d=s(""),o=s(""),N=s("/api/v1/cybercrime-data");ae(async()=>{try{const e=await fetch(t(v));if(!e.ok)throw new Error("No se pudo cargar el recurso.");const a=await e.json();r(i,a.autonomous_community),r(n,a.year),r(m,a.criminal_ofense),r(l,a.cybersecurity),r(d,a.arrested_investigated)}catch(e){r(o,`Error al cargar los datos: ${e.message}`)}});async function M(){try{const e=await fetch(t(v),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({autonomous_community:t(i),year:parseInt(t(n)),criminal_ofense:t(m),cybersecurity:t(l),arrested_investigated:parseInt(t(d))})});if(e.ok)r(o,"Registro actualizado correctamente"),setTimeout(()=>x("/cybercrime"),1500);else if(e.status===400){const a=await e.json();r(o,`Error en los datos: ${a.error}`)}else e.status===404?r(o,"El recurso que intentas actualizar no existe."):r(o,"Error inesperado al actualizar el registro.")}catch(e){const a=e instanceof Error?e.message:"Error desconocido";r(o,`No se pudo conectar con el servidor: ${a}`)}}function S(){x("/cybercrime")}R(()=>I(),()=>{const e=I().params;r(i,decodeURIComponent(e.autonomous_community)),r(n,e.year),r(m,decodeURIComponent(e.criminal_ofense))}),R(()=>(t(N),t(i),t(n)),()=>{r(v,`${t(N)}/${encodeURIComponent(t(i))}/${t(n)}`)}),G(),Z();var y=se();O(e=>{K.title="Editar recurso"});var z=f(y),A=f(z);{var q=e=>{var a=oe(),J=f(a,!0);_(a),L(()=>Q(J,t(o))),W(3,a,()=>X,()=>({duration:300})),C(e,a)};V(A,e=>{t(o)&&e(q)})}var g=c(A,2),b=f(g);p(b);var h=c(b,2);p(h);var $=c(h,2);p($);var E=c($,2);p(E);var w=c(E,2);p(w);var B=c(w,4);_(g),_(z),_(y),u(b,()=>t(i),e=>r(i,e)),u(h,()=>t(n),e=>r(n,e)),u($,()=>t(m),e=>r(m,e)),u(E,()=>t(l),e=>r(l,e)),u(w,()=>t(d),e=>r(d,e)),k("click",B,S),k("submit",g,Y(M)),C(j,y),H(),D()}export{be as component};
