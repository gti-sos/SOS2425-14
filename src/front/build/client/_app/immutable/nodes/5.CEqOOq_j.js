import{t as U,h as O,a as A}from"../chunks/C0k3Nw9y.js";import"../chunks/DPNYAhEg.js";import{v as F,z as C,A as G,b as t,w as H,$ as K,c as f,s as c,m as s,h as a,r as _,x as L}from"../chunks/cdyx5pLP.js";import{e as R,s as Q}from"../chunks/dBgfGCkZ.js";import{i as V}from"../chunks/CEmQKR9v.js";import{r as p}from"../chunks/CXYTPRs_.js";import{b as u,p as W,t as X,f as Y}from"../chunks/CYTxZMWJ.js";import{i as Z}from"../chunks/BZ6f0h1O.js";import{s as ee,a as te}from"../chunks/BxI2X47k.js";import{p as ae}from"../chunks/i07cANEI.js";import{o as re}from"../chunks/CV6rVgxM.js";import{g as k}from"../chunks/BdOZHeZb.js";var oe=U('<p class="info-message"> </p>'),se=U('<div class="wrapper dash"><div class="container dash"><!> <form class="create-form"><input readonly=""> <input readonly=""> <input placeholder="Número de delitos"> <input placeholder="Número de ciberseguridad"> <input placeholder="Número de arrestados/investigados"> <button type="submit" class="submit">Actualizar</button> <button type="button" class="cancel">Cancelar</button></form></div></div>');function ge(j,P){F(P,!1);const[T,D]=ee(),I=()=>te(ae,"$page",T),v=s();let i=s(""),n=s(""),m=s(""),l=s(""),d=s(""),o=s(""),N=s("/api/v1/cybercrime-data");re(async()=>{try{const e=await fetch(t(v));if(!e.ok)throw new Error("No se pudo cargar el recurso.");const r=await e.json();a(i,r.autonomous_community),a(n,r.year),a(m,r.criminal_ofense),a(l,r.cybersecurity),a(d,r.arrested_investigated)}catch(e){a(o,`Error al cargar los datos: ${e.message}`)}});async function M(){try{const e=await fetch(t(v),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({autonomous_community:t(i),year:parseInt(t(n)),criminal_ofense:t(m),cybersecurity:t(l),arrested_investigated:parseInt(t(d))})});if(e.ok)a(o,"Registro actualizado correctamente"),setTimeout(()=>k("/cybercrime"),1500);else if(e.status===400){const r=await e.json();a(o,`Error en los datos: ${r.error}`)}else e.status===404?a(o,"El recurso que intentas actualizar no existe."):a(o,"Error inesperado al actualizar el registro.")}catch(e){const r=e instanceof Error?e.message:"Error desconocido";a(o,`No se pudo conectar con el servidor: ${r}`)}}function S(){k("/cybercrime")}C(()=>I(),()=>{const e=I().params;a(i,decodeURIComponent(e.autonomous_community)),a(n,e.year),a(m,decodeURIComponent(e.criminal_ofense))}),C(()=>(t(N),t(i),t(n)),()=>{a(v,`${t(N)}/${encodeURIComponent(t(i))}/${t(n)}`)}),G(),Z();var y=se();O(e=>{K.title="Editar recurso"});var x=f(y),z=f(x);{var q=e=>{var r=oe(),J=f(r,!0);_(r),L(()=>Q(J,t(o))),X(3,r,()=>Y,()=>({duration:300})),A(e,r)};V(z,e=>{t(o)&&e(q)})}var g=c(z,2),b=f(g);p(b);var h=c(b,2);p(h);var $=c(h,2);p($);var E=c($,2);p(E);var w=c(E,2);p(w);var B=c(w,4);_(g),_(x),_(y),u(b,()=>t(i),e=>a(i,e)),u(h,()=>t(n),e=>a(n,e)),u($,()=>t(m),e=>a(m,e)),u(E,()=>t(l),e=>a(l,e)),u(w,()=>t(d),e=>a(d,e)),R("click",B,S),R("submit",g,W(M)),A(j,y),H(),D()}export{ge as component};
